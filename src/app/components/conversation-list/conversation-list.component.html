<!-- <div *ngIf="conversations$  as conversations">
  <mat-list *ngFor="let item of conversations">
    <mat-list-item *ngIf="item.messages.length>0">
      <h3 mat-line>{{item.messages[item.messages.length-1].authorId}}</h3>
      <p mat-line>{{item.messages[item.messages.length-1].content| truncateText: 90}}</p>
      <p mat-line>
        <small>{{item.messages[item.messages.length-1].createdAt|fromNow}}</small></p>
    </mat-list-item>
  </mat-list>
</div> -->

<ion-content>
  <div *ngIf="users ">
    <mat-list *ngFor="let user of users">
      <div *ngIf="user.conversations.length>0 && user.conversations as conversations">
        <mat-list-item (click)="getConversation(user.userId)" *ngIf="user.userId !==_user">
          <h3 mat-line>{{user.name}}</h3>
          <p mat-line *ngIf="conversations[0].messages.length>0">
            {{conversations[0].messages[conversations[0].messages.length-1].content}}</p>
          <p mat-line *ngIf="conversations[0].messages.length>0"><small>
              {{conversations[0].messages[conversations[0].messages.length-1].createdAt | fromNow}}</small>
          </p>

        </mat-list-item>
      </div>
    </mat-list>
  </div>

</ion-content>