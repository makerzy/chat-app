<ion-content scrollbar>
  <div *ngIf=" user && messages$ | async as messages">

    <ion-item lines="none" class="ion-no-padding ion-item" *ngFor="let message of messages; index">

      <ion-grid class="ion-no-padding">
        <ion-row (click)="select ? messageActions(message): null" [ngClass]="{'selectedMessage':message.isSelected }">
          <ion-col *ngIf=" message.authorId.split('-')[0] === user.username" size="2">
            <ion-label>
              <ion-checkbox item-start [checked]="message.isSelected" color="success" slot="start" *ngIf="select">
              </ion-checkbox>
            </ion-label>
          </ion-col>
          <!-- [ngClass]="{
                          'belongs-to-user': message.authorId.split('-')[0] === user.username,
                          'not-users': message.authorId.split('-')[0] !== user.username
                        }" -->
          <ion-col size="10">
            <div [id]="message.id" class="item" [ngClass]="{
                          'belongs-to-user': message.authorId.split('-')[0] === user.username,
                          'not-users': message.authorId.split('-')[0] !== user.username
                        }">
              <div *ngIf="message.repliedMessage" (click)="scrollToRepliedMessage(message.replyMessageId)"
                class="replyMessage">
                <h4>{{replyMessageAuthor.split('-')[0]}} {{ '['+replyMessageTime +']'}}</h4>
                <p>{{message.repliedMessage|truncateText: 65}}</p>
              </div>
              <ion-label class="ion-text-wrap">

                <ion-text class=" content">
                  <h3>{{ message.content }}</h3><br>
                </ion-text>
                <div [ngClass]="{
                          'time': message.authorId.split('-')[0] === user.username,
                          'time-left':message.authorId.split('-')[0] !== user.username
                        }">
                  <p>
                    <time class="">{{setTime(message.createdAt)}}</time>
                  </p>
                </div>
              </ion-label>
            </div>
          </ion-col>
          <ion-col *ngIf="message.authorId.split('-')[0] !== user.username" size="2">
            <ion-label>
              <ion-checkbox item-start [checked]="message.isSelected" color="success" slot="end" *ngIf="select">
              </ion-checkbox>
            </ion-label>
          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-item>
  </div>
</ion-content>